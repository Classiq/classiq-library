qstruct QsvtState {
  state: qnum<2>;
  block: qbit;
}

qfunc projector(be: QsvtState, res: qbit) {
  res ^= be.block == 0;
}

qfunc be_qfunc(qsvt_state: QsvtState) {
  unitary([
    [
      (-0.053380021089),
      (-0.361036621078),
      (-0.540164887303),
      (-0.390261254587),
      (-0.313105755143),
      0.143054978107,
      (-0.292038063153),
      (-0.467904913724)
    ],
    [
      (-0.333041206855),
      0.106482281854,
      0.373467040749,
      (-0.339779162196),
      (-0.587944254838),
      (-0.023276508074),
      0.510972549854,
      (-0.124516582304)
    ],
    [
      0.416781702308,
      (-0.751805190749),
      0.175938670385,
      0.209447732757,
      (-0.037373575562),
      (-0.208413751156),
      0.360023583742,
      (-0.108669879077)
    ],
    [
      0.268910790662,
      (-0.053337949515),
      (-0.326687871872),
      (-0.336028291945),
      (-0.281551634602),
      (-0.132550881611),
      0.061193376491,
      0.777570821663
    ],
    [
      0.321804095678,
      0.251318549,
      (-0.365177682366),
      0.179449193954,
      (-0.002469626126),
      0.602121591716,
      0.541200168304,
      (-0.110771050315)
    ],
    [
      0.64372085907,
      0.210586866489,
      0.439167372634,
      (-0.096624874569),
      (-0.333232989905),
      0.210578529768,
      (-0.412090730179),
      (-0.117753840827)
    ],
    [
      0.191832662363,
      0.013088591774,
      0.150010831803,
      (-0.729257755088),
      0.599531548921,
      0.010771339095,
      0.190375879748,
      (-0.113629749251)
    ],
    [
      (-0.292369520343),
      (-0.427292578397),
      0.286947577251,
      (-0.045909208331),
      0.07162282762,
      0.714827041576,
      (-0.145944664605),
      0.33179387365
    ]
  ], qsvt_state);
}

qfunc main(output qsvt_state: QsvtState, output qsvt_aux: qbit) {
  allocate(qsvt_aux);
  allocate(qsvt_state);
  inplace_prepare_amplitudes([
    0.0,
    0.267261241912,
    0.534522483825,
    0.801783725737
  ], 0, qsvt_state.state);
  qsvt_inversion([
    3.141592744052,
    3.141592282568,
    3.141593908377,
    3.141589440915,
    3.141600038975,
    3.141577789821,
    3.141620261336,
    3.141546003685,
    3.141665750135,
    3.1414883997,
    3.141726951558,
    3.141445548984,
    3.141708966775,
    3.141598707027,
    3.141303029606,
    3.142433752841,
    3.139790276275,
    3.144960766689,
    3.135814533937,
    3.150926088206,
    3.127214766364,
    3.162900687178,
    3.111054397273,
    3.184091560068,
    3.084015398797,
    3.217685786792,
    3.043392811107,
    3.265408665488,
    2.989126658603,
    3.324757870843,
    2.927340278921,
    3.384975405994,
    2.873952268165,
    3.425591281359,
    2.85165710875,
    2.85165710875,
    3.425591281359,
    2.873952268165,
    3.384975405994,
    2.927340278921,
    3.324757870843,
    2.989126658603,
    3.265408665488,
    3.043392811107,
    3.217685786792,
    3.084015398797,
    3.184091560068,
    3.111054397273,
    3.162900687178,
    3.127214766364,
    3.150926088206,
    3.135814533937,
    3.144960766689,
    3.139790276275,
    3.142433752841,
    3.141303029606,
    3.141598707027,
    3.141708966775,
    3.141445548984,
    3.141726951558,
    3.1414883997,
    3.141665750135,
    3.141546003685,
    3.141620261336,
    3.141577789821,
    3.141600038975,
    3.141589440915,
    3.141593908377,
    3.141592282568,
    (-213.628300353644)
  ], lambda(aux) {
    projector(qsvt_state, aux);
  }, lambda() {
    be_qfunc(qsvt_state);
  }, qsvt_aux);
}
