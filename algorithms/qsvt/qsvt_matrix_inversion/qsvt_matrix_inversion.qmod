qstruct QsvtState {
  state: qnum<2>;
  block: qbit;
}

qfunc projector(be: QsvtState, res: qbit) {
  res ^= be.block == 0;
}

qfunc be_qfunc(qsvt_stata: QsvtState) {
  unitary([
    [
      (-0.053380021089),
      (-0.361036621078),
      (-0.540164887303),
      (-0.390261254587),
      (-0.313105755143),
      0.143054978107,
      (-0.292038063153),
      (-0.467904913724)
    ],
    [
      (-0.333041206855),
      0.106482281854,
      0.373467040749,
      (-0.339779162196),
      (-0.587944254838),
      (-0.023276508074),
      0.510972549854,
      (-0.124516582304)
    ],
    [
      0.416781702308,
      (-0.751805190749),
      0.175938670385,
      0.209447732757,
      (-0.037373575562),
      (-0.208413751156),
      0.360023583742,
      (-0.108669879077)
    ],
    [
      0.268910790662,
      (-0.053337949515),
      (-0.326687871872),
      (-0.336028291945),
      (-0.281551634602),
      (-0.132550881611),
      0.061193376491,
      0.777570821663
    ],
    [
      0.321804095678,
      0.251318549,
      (-0.365177682366),
      0.179449193954,
      (-0.002469626126),
      0.602121591716,
      0.541200168304,
      (-0.110771050315)
    ],
    [
      0.64372085907,
      0.210586866489,
      0.439167372634,
      (-0.096624874569),
      (-0.333232989905),
      0.210578529768,
      (-0.412090730179),
      (-0.117753840827)
    ],
    [
      0.191832662363,
      0.013088591774,
      0.150010831803,
      (-0.729257755088),
      0.599531548921,
      0.010771339095,
      0.190375879748,
      (-0.113629749251)
    ],
    [
      (-0.292369520343),
      (-0.427292578397),
      0.286947577251,
      (-0.045909208331),
      0.07162282762,
      0.714827041576,
      (-0.145944664605),
      0.33179387365
    ]
  ], qsvt_stata);
}

qfunc main(output qsvt_state: QsvtState, output qsvt_aux: qbit) {
  allocate(qsvt_aux);
  allocate(qsvt_state);
  inplace_prepare_amplitudes([
    0.0,
    0.267261241912,
    0.534522483825,
    0.801783725737
  ], 0, qsvt_state.state);
  qsvt_inversion([
    3.141592738396,
    3.141592306594,
    3.141593824134,
    3.141589667879,
    3.1415994868,
    3.14157898507,
    3.141617843966,
    3.141550556039,
    3.141657597031,
    3.141502279887,
    3.141704238842,
    3.141481284728,
    3.141654545957,
    3.141678969292,
    3.141187891175,
    3.142594507295,
    3.139571162853,
    3.145252512247,
    3.135434191941,
    3.151411860677,
    3.126605830494,
    3.163650236887,
    3.110147203402,
    3.185171285575,
    3.082751129945,
    3.219140634107,
    3.041749992301,
    3.26722200708,
    2.987181211155,
    3.326766901411,
    2.925371575639,
    3.386763683622,
    2.872506703964,
    3.426536324278,
    2.851327834697,
    2.851327834697,
    3.426536324278,
    2.872506703964,
    3.386763683622,
    2.925371575639,
    3.326766901411,
    2.987181211155,
    3.26722200708,
    3.041749992301,
    3.219140634107,
    3.082751129945,
    3.185171285575,
    3.110147203402,
    3.163650236887,
    3.126605830494,
    3.151411860677,
    3.135434191941,
    3.145252512247,
    3.139571162853,
    3.142594507295,
    3.141187891175,
    3.141678969292,
    3.141654545957,
    3.141481284728,
    3.141704238842,
    3.141502279887,
    3.141657597031,
    3.141550556039,
    3.141617843966,
    3.14157898507,
    3.1415994868,
    3.141589667879,
    3.141593824134,
    3.141592306594,
    (-213.6283003593)
  ], projector, be_qfunc, qsvt_state, qsvt_aux);
}
