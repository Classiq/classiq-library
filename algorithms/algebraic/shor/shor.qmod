qfunc period_finding(n: int, a: int, x: qbit[], phase_var: qnum) {
  qpe_flexible(lambda(p) {
    inplace_modular_multiply(n, a ** p, x);
  }, phase_var);
}

qfunc main(output phase_var: qnum<12, UNSIGNED, 12>) {
  x: qnum;
  allocate(6, x);
  allocate(phase_var);
  x ^= 1;
  period_finding(21, 11, x, phase_var);
}
